@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<h1>Aplicación Razor</h1>
<p id="mensaje-recibido"></p>

<iframe id="angular-frame" width="100%" height="600px" style="border: none;"></iframe>

<button onclick="sendMessageToAngular()">Enviar Mensaje a Angular</button>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById('angular-frame').src = "http://localhost:4200/";
    });
    window.addEventListener("message", function (event) {
        if (event.data.type === "update") {
            document.getElementById("mensaje-recibido").innerText = "Mensaje de Angular: " + event.data.data;
        }
    });
    function sendMessageToAngular() {
        const iframe = document.getElementById("angular-frame").contentWindow;
        iframe.postMessage({ type: "update", data: "¡Hola desde Razor!" }, "*");
    }
</script>